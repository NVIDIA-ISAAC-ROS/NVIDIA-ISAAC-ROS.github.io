=================================================
Tutorial for AprilTag Detection with a USB Camera
=================================================


Overview
------------

This tutorial walks you through a graph to estimate the 6DOF pose of
`AprilTags <https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_apriltag>`__
using images streamed from a USB camera.

Tutorial Walkthrough
--------------------

1. Complete the `Quickstart section <../README.md#quickstart>`__ in the
   main README.
2. Calibrate the camera following instructions in the `camera
   calibration
   tutorial <https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_common/blob/main/docs/camera-calibration.md>`__.
   For step 11, use ``isaac_ros_apriltag`` in place of
   ``<isaac_ros_package>``
3. Clone the ROS 2 usb_cam package

   .. code:: bash

      cd ~/workspaces/isaac_ros-dev/src && git clone -b ros2 https://github.com/ros-drivers/usb_cam

4. Launch the Docker container using the ``run_dev.sh`` script:

   .. code:: bash

      cd ~/workspaces/isaac_ros-dev/src/isaac_ros_common && \
          ./scripts/run_dev.sh

5. Inside the container, build and source the workspace:

   .. code:: bash

      cd /workspaces/isaac_ros-dev && \
        colcon build --symlink-install && \
        source install/setup.bash

6. Finally, launch the provided launch file:

   .. code:: bash

      ros2 launch isaac_ros_apriltag isaac_ros_apriltag_usb_cam.launch.py

7. Launch a second terminal inside the container

   .. code:: bash

      cd ~/workspaces/isaac_ros-dev/src/isaac_ros_common && \
          ./scripts/run_dev.sh

8. Run the rviz2 using the preset config file

   .. code:: bash

      rviz2 -d /workspaces/isaac_ros-dev/src/isaac_ros_apriltag/isaac_ros_apriltag/rviz/usb_cam.rviz

..

.. note::

   Your camera vendor may offer a specific ROS 2-compatible
   camera driver package and you can use that in place of the usb_cam
   package. **Important**: If you are using a different camera driver
   package ensure that the camera stream publishes ``Image`` and
   ``CameraInfo`` pairs to the topics ``/image`` and ``/camera_info``,
   respectively.
